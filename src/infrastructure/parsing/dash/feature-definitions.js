/**
 * @typedef {object} Feature
 * @property {string} name
 * @property {'Core Streaming' | 'Timeline & Segment Management' | 'Live & Dynamic' | 'Advanced Content' | 'Client Guidance & Optimization' | 'Accessibility & Metadata'} category
 * @property {string} desc
 * @property {string} isoRef
 * @property {boolean} [isDynamic] - True if the feature can appear dynamically in a live stream.
 * @property {number} [complexityScore] - Weighted score (1-5) for complexity calculation.
 */

/** @type {Feature[]} */
export const dashFeatureDefinitions = [
    {
        name: 'Presentation Type',
        category: 'Core Streaming',
        desc: 'Defines if the stream is live (`dynamic`) or on-demand (`static`).',
        isoRef: 'DASH: 5.3.1.2',
        complexityScore: 1,
    },
    {
        name: 'CDN Redundancy',
        category: 'Core Streaming',
        desc: 'Uses multiple `<BaseURL>` elements to provide failover or load balancing across Content Delivery Networks.',
        isoRef: 'DASH: 5.6',
        isDynamic: true,
        complexityScore: 2,
    },
    {
        name: 'MPD Location Signaling',
        category: 'Core Streaming',
        desc: 'Provides `Location` elements to update the MPD URL, often used for dynamic load balancing of the manifest generation itself.',
        isoRef: 'DASH: 5.3.1.2',
        isDynamic: true,
        complexityScore: 2,
    },
    {
        name: 'Scoped Profiles',
        category: 'Core Streaming',
        desc: 'Declares profile conformance for specific Adaptation Sets or Representations, allowing for mixed-profile manifests.',
        isoRef: 'DASH: 5.3.7.2',
        complexityScore: 3,
    },
    {
        name: 'Multi-Period',
        category: 'Core Streaming',
        desc: '[Ad Insertion] The presentation is split into multiple, independent periods. Commonly used for Server-Side Ad Insertion (SSAI) and discontinuity management.',
        isoRef: 'DASH: 5.3.2',
        isDynamic: true,
        complexityScore: 4,
    },
    {
        name: 'Content Protection',
        category: 'Core Streaming',
        desc: 'Indicates that the content is encrypted, typically using Common Encryption (CENC) with one or more DRM systems.',
        isoRef: 'DASH: 5.8.4.1',
        isDynamic: true,
        complexityScore: 3,
    },
    {
        name: 'Segment Templates',
        category: 'Timeline & Segment Management',
        desc: 'Segment URLs are generated using a template (e.g. `$Number$`, `$Time$`), efficiently scaling for long presentations.',
        isoRef: 'DASH: 5.3.9.4',
        complexityScore: 2,
    },
    {
        name: 'Segment Timeline',
        category: 'Timeline & Segment Management',
        desc: 'Provides explicit segment timing and duration for each segment via `<S>` elements, allowing for variable segment sizes and drift correction.',
        isoRef: 'DASH: 5.3.9.6',
        complexityScore: 3,
    },
    {
        name: 'Segment List',
        category: 'Timeline & Segment Management',
        desc: 'Segment URLs are listed explicitly in the manifest. Common for older VOD content or specific ad-insertion workflows.',
        isoRef: 'DASH: 5.3.9.3',
        complexityScore: 1,
    },
    {
        name: 'Representation Index',
        category: 'Timeline & Segment Management',
        desc: 'Provides a byte-range index (`sidx`) for segments within a single file (On-Demand Profile), allowing efficient seeking without parsing the whole file.',
        isoRef: 'DASH: 5.3.9.2.2',
        complexityScore: 2,
    },
    {
        name: 'Failover Content',
        category: 'Timeline & Segment Management',
        desc: 'Signals time ranges where content may be replaced by failover material (e.g., slate) due to upstream encoding errors.',
        isoRef: 'DASH: 5.3.9.7',
        isDynamic: true,
        complexityScore: 4,
    },
    {
        name: 'Low Latency Streaming',
        category: 'Live & Dynamic',
        desc: 'The manifest includes features for low-latency playback, such as chunked transfer hints (availabilityTimeComplete="false") or Service Description latency targets.',
        isoRef: 'DASH: Annex K.3.2',
        isDynamic: true,
        complexityScore: 5,
    },
    {
        name: 'Manifest Patch Updates',
        category: 'Live & Dynamic',
        desc: 'Allows efficient manifest updates by sending only the XML differences (patches) instead of the full MPD.',
        isoRef: 'DASH: 5.15',
        isDynamic: true,
        complexityScore: 5,
    },
    {
        name: 'Content Steering',
        category: 'Live & Dynamic',
        desc: 'Directs the client to specific CDNs or content sources based on server-side logic via the `ContentSteering` element.',
        isoRef: 'DASH: 5.3.14',
        isDynamic: true,
        complexityScore: 4,
    },
    {
        name: 'MPD Events',
        category: 'Live & Dynamic',
        desc: 'The manifest contains `<EventStream>` elements, communicating timed metadata (like SCTE-35 or app logic) directly in the manifest.',
        isoRef: 'DASH: 5.10.2',
        isDynamic: true,
        complexityScore: 3,
    },
    {
        name: 'Inband Events',
        category: 'Live & Dynamic',
        desc: 'The manifest signals that event messages (`emsg` boxes) are embedded within the media segments, often used for frame-accurate SCTE-35 splicing.',
        isoRef: 'DASH: 5.10.3',
        isDynamic: true,
        complexityScore: 3,
    },
    {
        name: 'Producer Reference Time',
        category: 'Live & Dynamic',
        desc: 'Provides a mapping between media timestamps and a wall-clock production time, enabling precise latency measurement and synchronization across devices.',
        isoRef: 'DASH: 5.12',
        isDynamic: true,
        complexityScore: 3,
    },
    {
        name: 'UTC Timing Source',
        category: 'Live & Dynamic',
        desc: 'Provides a trusted source (ISO 8601, NTP, HTTP-HEAD) for clients to synchronize their wall-clock time, critical for live stream synchronization.',
        isoRef: 'DASH: 5.8.4.11',
        complexityScore: 2,
    },
    {
        name: 'Leap Second Information',
        category: 'Live & Dynamic',
        desc: 'Provides explicit information on leap seconds to maintain synchronization accuracy over long durations.',
        isoRef: 'DASH: 5.13',
        complexityScore: 2,
    },
    {
        name: 'Dependent Representations',
        category: 'Advanced Content',
        desc: 'Uses `dependencyId` to signal that a Representation depends on another for decoding (e.g., Scalable Video Coding (SVC) or tiled video).',
        isoRef: 'DASH: 5.3.5.2',
        complexityScore: 5,
    },
    {
        name: 'Preselections',
        category: 'Advanced Content',
        desc: 'Defines a complete "experience" by grouping a set of Adaptation Sets (e.g., video + main audio + commentary), often used for Next Generation Audio (NGA).',
        isoRef: 'DASH: 5.3.11',
        complexityScore: 4,
    },
    {
        name: 'Trick Modes',
        category: 'Advanced Content',
        desc: 'Provides dedicated tracks (e.g. I-Frame only) or SubRepresentations to enable efficient fast-forward and rewind operations.',
        isoRef: 'DASH: 5.3.6',
        isDynamic: true,
        complexityScore: 3,
    },
    {
        name: 'Service Description',
        category: 'Client Guidance & Optimization',
        desc: 'Provides server-side guidance to the client on latency targets, playback rates, and quality/bandwidth constraints.',
        isoRef: 'DASH: Annex K',
        isDynamic: true,
        complexityScore: 3,
    },
    {
        name: 'Resync Points',
        category: 'Client Guidance & Optimization',
        desc: 'Signals the presence of Random Access Points (RAP) within segments to allow for faster startup or recovery after a stall.',
        isoRef: 'DASH: 5.3.13',
        isDynamic: true,
        complexityScore: 3,
    },
    {
        name: 'Bitstream Switching',
        category: 'Client Guidance & Optimization',
        desc: 'Guarantees that segments can be concatenated and decoded without re-initializing the decoder, enabling seamless ABR switching.',
        isoRef: 'DASH: 5.3.3.2',
        complexityScore: 2,
    },
    {
        name: 'Subtitles & Captions',
        category: 'Accessibility & Metadata',
        desc: 'Provides text-based tracks for subtitles, closed captions, or other timed text information.',
        isoRef: 'DASH: 5.3.3',
        complexityScore: 2,
    },
    {
        name: 'Asset Identifier',
        category: 'Accessibility & Metadata',
        desc: 'Provides a unique identifier for the content asset, allowing clients to track logical continuity across multi-period ad insertions.',
        isoRef: 'DASH: 5.8.4.10',
        complexityScore: 2,
    },
    {
        name: 'Accessibility Descriptors',
        category: 'Accessibility & Metadata',
        desc: 'Explicitly signals accessibility features like audio description, closed captions, or sign language via `Accessibility` descriptors.',
        isoRef: 'DASH: 5.8.4.3',
        complexityScore: 2,
    },
    {
        name: 'Essential Descriptors',
        category: 'Accessibility & Metadata',
        desc: 'Contains `EssentialProperty` descriptors. The client MUST understand the scheme to process the containing element, or else ignore the element.',
        isoRef: 'DASH: 5.8.4.8',
        complexityScore: 3,
    },
    {
        name: 'Supplemental Descriptors',
        category: 'Accessibility & Metadata',
        desc: 'Contains `SupplementalProperty` descriptors. The client may use the information for optimization but can ignore it if the scheme is unknown.',
        isoRef: 'DASH: 5.8.4.9',
        complexityScore: 3,
    },
];
